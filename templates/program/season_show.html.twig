{# templates/program/show.html.twig #}
{% extends 'base.html.twig' %}
{% block title %}{{ program.title }}{% endblock %}

{% block body %}
    <div class="media">
        <img class="align-self-start mr-3" src="{{program.poster}}" alt="{{ program.title }} poster">
        <div class="media-body">
            <h1 class="mt-0">{{ program.title }}</h1>
                <div>
                    <h2>Saison n° {{ season.number }} - Année : {{ season.year }}</h2>
                    <p>{{ season.description }}</p>

                    {% for episode in season.episodes %}
                        <div>
                            <h2>{{ loop.index }} / Episode n° {{ episode.number }} - {{ episode.title }}</h2>
                            <p>{{ episode.synopsis }}</p>
                            {# Lien vers la fiche de l'épisode de la série : #}
                            <a href="{{ path("program_episode_show", { "program_slug": program.slug, "season_number": season.number, "episode_slug": episode.slug }) }}" class="text-secondary">Voir l'épisode</a>
                            {% if is_granted("ROLE_ADMIN") %}
                            -
                            <a href="{{ path("season_edit", { id: season.id }) }}" class="text-secondary">Modifier la saison</a>
                            -
                            <a href="{{ path("season_delete", { id: season.id }) }}" class="text-secondary">Supprimer la saison</a>
                            {% endif %}
                        </div>
                    {% else %}
                        Aucune série trouvée.
                    {% endfor %}

                </div>
         </div>
    </div>

    <a href="{{ path('program_index') }}">
        Retour à la liste des programmes
    </a>

{% endblock %}
